(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{700:function(s,t,a){"use strict";a.r(t);var n=a(88),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"使用uniapp开发微信小程序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用uniapp开发微信小程序"}},[s._v("#")]),s._v(" 使用uniapp开发微信小程序")]),s._v(" "),a("h2",{attrs:{id:"初始流程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#初始流程"}},[s._v("#")]),s._v(" 初始流程")]),s._v(" "),a("h3",{attrs:{id:"创建项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建项目"}},[s._v("#")]),s._v(" 创建项目")]),s._v(" "),a("ol",[a("li",[s._v("全局安装vue脚手架"),a("br"),s._v(" "),a("code",[s._v("npm install -g @vue/cli")])]),s._v(" "),a("li",[s._v("使用uni-app创建项目"),a("br"),s._v(" "),a("code",[s._v("vue create -p dcloudio/uni-preset-vue my-project")])]),s._v(" "),a("li",[s._v("运行"),a("br"),s._v(" "),a("code",[s._v("npm run dev:mp-weixin")])]),s._v(" "),a("li",[s._v("在小程序开发工具中导入项目\n打开开发者工具->导入项目->dist->dev->mp-weixin")])]),s._v(" "),a("h3",{attrs:{id:"样式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#样式"}},[s._v("#")]),s._v(" 样式")]),s._v(" "),a("ol",[a("li",[s._v("sass\n安装"),a("code",[s._v("npm install sass-loader node-sass")]),a("br"),s._v("\n使用"),a("code",[s._v("<style lang='scss'>")]),s._v("即可"),a("br"),s._v("\nuni-app内置sass配置")]),s._v(" "),a("li",[s._v("单位\nrpx和vw/vh都支持")])]),s._v(" "),a("h3",{attrs:{id:"全局数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#全局数据"}},[s._v("#")]),s._v(" 全局数据")]),s._v(" "),a("ol",[a("li",[s._v("vue全局挂载"),a("code",[s._v("vue.prototype.XX = ''")])]),s._v(" "),a("li",[s._v("小程序全局数据")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("APP.vue中的globalData:{}\n\n赋值 getApp().globalData.text = 'test'\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"生命周期"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#生命周期"}},[s._v("#")]),s._v(" 生命周期")]),s._v(" "),a("ol",[a("li",[s._v("uni-app结合了vue和小程序的生命周期")]),s._v(" "),a("li",[s._v("全局APP中使用onLaunch表示应用启动时 onshow、onHide当用户切换外部应用时生效")]),s._v(" "),a("li",[s._v("页面中 onLoad表示页面加载完毕时  onshow表示页面显示时")]),s._v(" "),a("li",[s._v("组件中依然使用vue生命周期，使用onLoad是无效的")])]),s._v(" "),a("h3",{attrs:{id:"布局"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#布局"}},[s._v("#")]),s._v(" 布局")]),s._v(" "),a("ol",[a("li",[a("strong",[a("a",{attrs:{href:"https://uniapp.dcloud.io/collocation/pages?id=tabbar",target:"_blank",rel:"noopener noreferrer"}},[s._v("底部导航"),a("OutboundLink")],1)])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('pages.json中\n\n    "tabBar": {\n\t    "color": "#7A7E83",\t\t\t\t\t//默认文字颜色\n\t    "selectedColor": "#3cc51f",\t\t\t//选中文字颜色\n\t    "borderStyle": "black",\t\t\t\t//tabbar 上边框的颜色\n\t    "backgroundColor": "#ffffff",\t\t//底部导航背景颜色\n\t    "list": [{\t\t\t\t\t\t\t//导航对应的文件地址，icon地址，文字\n\t        "pagePath": "pages/demo/index",\n\t        "iconPath": "static/image/time.jpg",\n\t        "selectedIconPath": "static/image/time.jpg",\n\t        "text": "组件"\n\t    }, {\n\t        "pagePath": "pages/index/index",\n\t        "iconPath": "static/image/time.jpg",\n\t        "selectedIconPath": "static/image/time.jpg",\n\t        "text": "接口"\n\t    }]\n\t}\n\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[a("strong",[s._v("引入字体图标和默认样式清除")])])]),s._v(" "),a("ul",[a("li",[a("p",[s._v("创建目录"),a("br"),s._v(" "),a("kbd",[s._v("根目录")]),s._v("->"),a("kbd",[s._v("src")]),s._v("->"),a("kbd",[s._v("styles")]),s._v("->"),a("kbd",[s._v("iconfont.wxss")])])]),s._v(" "),a("li",[a("p",[s._v("复制iconfont生成的在线代码到"),a("kbd",[s._v("iconfont.wxss")]),s._v("中"),a("br"),s._v(" "),a("img",{attrs:{src:"/assets/img/uni-app/uni-app1.jpg",width:"500",height:"auto",align:"middle"}})])]),s._v(" "),a("li",[a("p",[s._v("在app.vue中引入样式")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('<style>\n\t@import "./styles/iconfont.wxss";\n</style>\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("ul",[a("li",[a("p",[s._v("使用"),a("br"),s._v(" "),a("code",[s._v('<text class="iconfont icon-tab"></text>')])])]),s._v(" "),a("li",[a("p",[s._v("默认样式清除"),a("br"),s._v("\n小程序不支持*通配符，所以需要手写每个标签\n"),a("kbd",[s._v("根目录")]),s._v("->"),a("kbd",[s._v("src")]),s._v("->"),a("kbd",[s._v("styles")]),s._v("->"),a("kbd",[s._v("base.wxss")])])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("view,\ntext,\nnavigator,\ninput,\nimage,\nswiper,\nswiper-item,\nscroll-view,\npage {\n\tmargin: 0;\n\tpadding: 0;\n\tbox-sizing: border-box;\n}\n\npage{\n\tfont-size: 28rpx;\n\tcolor: #666;\n}\nimage{\n\twidth: 100%;\n\tdisplay: block;\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br")])]),a("ol",{attrs:{start:"3"}},[a("li",[a("strong",[s._v("uni-ui的使用")])])]),s._v(" "),a("p",[a("a",{attrs:{href:"https://uniapp.dcloud.io/component/README?id=uniui",target:"_blank",rel:"noopener noreferrer"}},[s._v("文档地址"),a("OutboundLink")],1),a("br"),s._v("\n组件->拓展组件->"),a("a",{attrs:{href:"https://ext.dcloud.net.cn/plugin?id=55",target:"_blank",rel:"noopener noreferrer"}},[s._v("npm安装参考"),a("OutboundLink")],1),s._v("->"),a("a",{attrs:{href:"https://www.npmjs.com/package/@dcloudio/uni-ui",target:"_blank",rel:"noopener noreferrer"}},[s._v("详细文档"),a("OutboundLink")],1)]),s._v(" "),a("ol",{attrs:{start:"4"}},[a("li",[a("strong",[s._v("请求封装")]),s._v("\n封装原因：")]),s._v(" "),a("li",[s._v("原生wx请求不支持promise")]),s._v(" "),a("li",[s._v("uni-api的请求不方便添加loading效果")]),s._v(" "),a("li",[s._v("uni-api的请求返回的是一个数组，不方便")])]),s._v(" "),a("p",[a("kbd",[s._v("src")]),s._v("->"),a("kbd",[s._v("utils")]),s._v("->"),a("kbd",[s._v("request.js")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('export default (params)=>{\n\treturn new Promise((reslove,reject)=>{\n\t\tuni.showLoading({\n\t\t\ttitle:"加载中..."\n\t\t})\n\t\t\n\t\twx.request({\n\t\t\t...params,\n\t\t\tsuccess(res){\n\t\t\t\treslove(res)\n\t\t\t},\n\t\t\tfail(err){\n\t\t\t\treject(err)\n\t\t\t},\n\t\t\tcomplete() {\n\t\t\t\tuni.hideLoading()\n\t\t\t}\n\t\t})\t\n\t})\n}\n\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br")])]),a("h3",{attrs:{id:"标签功能改动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#标签功能改动"}},[s._v("#")]),s._v(" 标签功能改动")]),s._v(" "),a("ol",[a("li",[s._v("跳转\n"),a("strong",[s._v("navigator")])])]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("跳转")]),s._v(" "),a("p",[s._v("该组件类似HTML中的"),a("code",[s._v("<a></a>")]),s._v("标签，但只能跳转本地页面。目标页面必须在pages.json中注册。\n通过url属性来跳转")]),s._v(" "),a("p",[s._v("动态跳转")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("//路径为根目录的具体路径  参数使用?拼接\nuni.navigateTo({\n\turl: '/packagePages/pages/ApplicationDetail/index?depType=code' \n});\n\n//接收参数  在目标页面的onLoad函数中通过options接收\nonLoad: function(option) { \t//option为object类型，会序列化上个页面传递的参数\n\tconsole.log(option); \t//打印出上个页面传递的参数。\n}\n\n//返回上一页\nuni.navigateBack({\n    delta: 1\n});\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])])]),s._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[s._v("请求\n"),a("strong",[s._v("uni.request")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("uni.request({\n    url: 'https://www.example.com/request', //仅为示例，并非真实接口地址。\n    data: {},\n    header: {\n        'custom-header': 'hello' //自定义请求头信息\n    },\n    success: (res) => {\n        console.log(res.data);\n    }\n});\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("h3",{attrs:{id:"引入外部组件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#引入外部组件"}},[s._v("#")]),s._v(" 引入外部组件")]),s._v(" "),a("p",[s._v("以vant-weapp为例")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("创建目录"),a("br"),s._v(" "),a("kbd",[s._v("src")]),s._v("->"),a("kbd",[s._v(" wxcomponents")]),s._v("->"),a("kbd",[s._v("vant")]),a("br"),s._v(" "),a("img",{attrs:{src:"/assets/img/uni-app/uni-app2.jpg",width:"300",height:"auto",align:"middle"}})])]),s._v(" "),a("li",[a("p",[s._v("项目中引入vant-weapp组件"),a("br"),s._v("\n在"),a("a",{attrs:{href:"https://github.com/youzan/vant-weapp",target:"_blank",rel:"noopener noreferrer"}},[s._v("vant-weapp"),a("OutboundLink")],1),s._v("的GitHub "),a("a",{attrs:{href:"https://github.com/youzan/vant-weapp/releases",target:"_blank",rel:"noopener noreferrer"}},[s._v("Releases"),a("OutboundLink")],1),s._v("版块下载最新的zip包"),a("br"),s._v("\n解压下载文件,将dist目录拷贝到刚才创建vant目录中"),a("br"),s._v(" "),a("img",{attrs:{src:"/assets/img/uni-app/uni-app3.jpg",width:"500",height:"auto",align:"middle"}})])]),s._v(" "),a("li",[a("p",[s._v("在配置中注册组件")])])]),s._v(" "),a("ul",[a("li",[a("p",[s._v("将需要频繁使用的组件在pages.json的globalStyle的usingComponents中引入，如下图\n"),a("img",{attrs:{src:"/assets/img/uni-app/uni-app4.jpg",width:"500",height:"auto",align:"middle"}})])]),s._v(" "),a("li",[a("p",[s._v("需要单独引入的则写入pages.json的pages中对应页面的style->usingComponents即可（注意加入对应小程序的模块名称）"),a("br"),s._v(" "),a("img",{attrs:{src:"/assets/img/uni-app/uni-app5.jpg",width:"500",height:"auto",align:"middle"}})])]),s._v(" "),a("li",[a("p",[s._v("如果不生效，试着在App.Vue文件中style部分引入UI组件库的 样式文件"),a("br"),s._v(" "),a("code",[s._v('@import "/wxcomponents/vant/dist/common/index.wxss";')])])]),s._v(" "),a("li",[a("p",[s._v("接着就可以随意使用啦~"),a("br"),s._v(" "),a("code",[s._v('<van-button type="default">默认按钮</van-button>')])])])]),s._v(" "),a("h3",{attrs:{id:"分包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#分包"}},[s._v("#")]),s._v(" 分包")]),s._v(" "),a("blockquote",[a("p",[s._v("小程序打包体积有大小限制，超过2M的就不能在线预览和真机调试了。")])]),s._v(" "),a("p",[s._v("所以我们要做的除了对图片进行压缩处理之外，还可以对页面进行分包处理。简单来讲就是主要页面放在主目录的pages里面，次要页面放在分包目录中，需要的时候在加载进来。")]),s._v(" "),a("details",{staticClass:"custom-block details"},[a("summary",[s._v("详细步骤")]),s._v(" "),a("ol",[a("li",[s._v("在pages同级创建分包目录packagePages")]),s._v(" "),a("li",[a("kbd",[s._v("packagePages")]),s._v("下创建"),a("kbd",[s._v(" pages")]),s._v("文件夹（放置页面文件）和"),a("kbd",[s._v("static")]),s._v("文件夹（放置静态资源）")]),s._v(" "),a("li",[a("kbd",[s._v("pages.json")]),s._v("中增加分包配置")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('//分包配置\n"subPackages":[{\n\t\t"root": "packagePages", // 当前分包的根目录文件\n\t\t"pages":[{  \t\t\t// 当前分包的页面配置\n\t\t\t"path": "pages/index/index",\n\t\t\t"style": {\n\t\t\t\t"navigationBarTitleText": "分包测试页面"\n\t\t\t}\n\t\t}]\n}],\n\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("ol",{attrs:{start:"4"}},[a("li",[a("kbd",[s._v("manifest.json")]),s._v("->"),a("kbd",[s._v(" 源码视图")]),s._v("->"),a("kbd",[s._v("mp-weixin")]),s._v("对象中增加分包优化配置"),a("br"),s._v(" "),a("code",[s._v('"optimization":{"subPackages":true}')])])])]),s._v(" "),a("h2",{attrs:{id:"小知识"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#小知识"}},[s._v("#")]),s._v(" 小知识")]),s._v(" "),a("ol",[a("li",[s._v("微信小程序不支持css的*通配符")]),s._v(" "),a("li",[s._v("图片视频等静态文件只能放在static目录下")]),s._v(" "),a("li",[s._v("css、less/scss 等资源不要放在 static 目录下，建议这些公用的资源放在自建的 common 目录下。")]),s._v(" "),a("li",[s._v("uni-app内置了vuex，所以可以直接使用，不用安装")]),s._v(" "),a("li",[s._v("跳转Tabbar页面时，不能使用uni.navigateTo()，需要用uni.switchTab();")]),s._v(" "),a("li",[s._v("常用api")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("//本地缓存\nuni.setStorageSync('key', res.result.id);\nuni.getStorageSync('key')\n\n[自定义分享内容](https://uniapp.dcloud.io/api/plugins/share?id=onshareappmessage)\n  //先打开分享按钮（onLoad或者mounted中）\n  wx.showShareMenu({\n\twithShareTicket: true,\n\tmenus: ['shareAppMessage', 'shareTimeline']\n  })\n  \n  //自定义内容(跟onLoad或者mounted同级)\n  onShareAppMessage(res) {\n    if (res.from === 'button') {// 来自页面内分享按钮\n      console.log(res.target)\n    }\n    return {\n      title: '自定义分享标题',\n      path: '/pages/test/test?id=123'\n    }\n  }\n\n注意onShareAppMessage已经没有成功失败的回调了，是因为官方为了防止诱导分享\n\n//动态修改页面标题\nuni.setNavigationBarTitle({\n\ttitle:\"改了  有什么好说的\"\n})\n\n//动态跳转\nuni.navigateTo({\n\turl:\"../index/index\"\n})\n\n//返回上一页\nuni.navigateBack({\n    delta: 1\n});\n\n//下载图片和视频\nuni.downloadFile({\n\turl:\"\"\n})\nthen可以接收到一个数组，第二项为图片或者视频在小程序中的临时路径，需要将它下载到本地\nuni.saveImageToPhotosAlbum({\t//图片保存到本地\n\tfilePath:\"\"\t\t\t\t\t//此处传入上面得到的临时地址\n})\nuni.saveVideoToPhotosAlbum({\t//视频保存到本地\n\tfilePath:\"\"\n})\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br")])]),a("ol",{attrs:{start:"5"}},[a("li",[s._v("常用事件")])]),s._v(" "),a("ul",[a("li",[s._v("手指按下屏幕 touchstart")]),s._v(" "),a("li",[s._v("手指离开屏幕 touchend")]),s._v(" "),a("li",[s._v("手指在屏幕上的坐标 event.changedTouches[0].clientX和clientY")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("@touchstart='touchStart'\n\ntouchStart(event){\n\t//手指按下时的横纵坐标\n\tconsole.log(event.changedTouches[0].clientX);\n\tconsole.log(event.changedTouches[0].clientY);\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("h2",{attrs:{id:"排坑"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#排坑"}},[s._v("#")]),s._v(" 排坑")]),s._v(" "),a("ol",[a("li",[s._v("未找到 van-toast 节点，请确认 selector 及 context 是否正确")])]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("问题描述")]),s._v(" "),a("p",[s._v("在uni-app开发的小程序中使用toast组件，先在全局globalStyle中注册了van-toast,结果发现报错"),a("br"),s._v("\n查阅文档才发现，还需要在当前页面单独引入"),a("br"),s._v(" "),a("code",[s._v("import Toast from '@/wxcomponents/vant/dist/toast/toast'")]),a("br"),s._v("\n结果引入之后就报了上面的错误   百思不得其解"),a("br"),s._v("\n最后百度了一下，发现居然还要在template中加入van-toast标签才可以"),a("br"),s._v(" "),a("code",[s._v('<van-toast id="van-toast" />')]),a("br"),s._v("\n就离谱")])]),s._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[s._v("跳转失效\n登录之后想要跳转到首页，但是怎么都没反应，控制台还报了警告,也看不懂")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Content Security Policy of your site blocks the use of 'eval' in JavaScript\nIndicate whether a cookie is intended to be set in a cross-site context by specifying its SameSite attribute\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("最后查阅得知，想要跳转到Tabbar中注册的页面时，不能使用uni.navigateTo()，需要用uni.switchTab();")]),s._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[s._v("input框初次输入一直会出现[object object]\n"),a("img",{attrs:{src:"/assets/img/uni-app/uni-app6.jpg",width:"300",height:"auto",align:"middle"}})])]),s._v(" "),a("p",[s._v("表单组件使用的是uni-ui的forms组件，但是输入框用的是vant-weapp的，按照uni-forms的用法执行后就出现这种情况，排查了各种问题"),a("br"),s._v("\n初始值，传入的值，都没什么问题，最后突然想起来是不是绑定的值出了问题，查阅了vant-weapp的filed组件的用法，发现了问题所在"),a("br"),s._v(" "),a("code",[s._v('<van-field v-model="formData.captcha">')]),a("br"),s._v("\n应该按照vant的用法，使用:value绑定值，而不是v-model"),a("br"),s._v("\n呼~累")]),s._v(" "),a("ol",{attrs:{start:"4"}},[a("li",[s._v("本地资源图片无法通过 WXSS 获取，可以使用...")])]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("问题描述")]),s._v(" "),a("p",[s._v("报错原因是因为在css中使用了背景图片\n"),a("code",[s._v('background-image: url("../../static/images/bg/manage_bg_fxq750.jpg");')])]),s._v(" "),a("p",[s._v("最简单的解决办法是将样式写在HTML中（行内样式）即可。"),a("br"),s._v("\n转成base64会导致代码量大大增加，不太合理。")])]),s._v(" "),a("ol",{attrs:{start:"10"}},[a("li",[s._v("scss语法报错")])]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("问题描述")]),s._v(" "),a("p",[s._v("明明安装了node-sass和sass-loader，但是编译完之后，小程序开发者工具始终会报错。")]),s._v(" "),a("p",[s._v("位置就是使用了sass语法的地方。")]),s._v(" "),a("p",[s._v("百思不得其解+1。")]),s._v(" "),a("p",[s._v("重装了HBuilderX的sass编译器，"),a("code",[s._v("<style>")]),s._v("标签里也加了lang='scss'，仍然没有解决")]),s._v(" "),a("p",[s._v("最后百度得知原来是引入方式错误了")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('//错误写法\n<style lang="scss">\n\t@import url("@/styles/common.scss");\n\t@import url("@/styles/vant.scss");\n</style>\n\n//正确写法\n<style lang="scss">\n\t@import "@/styles/common.scss";\n\t@import "@/styles/vant.scss";\n</style>\n\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("ol",{attrs:{start:"11"}},[a("li",[s._v("图片不显示")])]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("问题描述")]),s._v(" "),a("p",[s._v("同一个页面，上面是大的轮播图，下面是一些小图标，用的都是van-image标签"),a("br"),s._v("\n奇怪的是，图标可以显示，轮播图不行"),a("br"),s._v("\n各种排除，src路经是没错的，因为打印出来的路径用网页可以打开，写法也没什么错误，引入图片的方式也跟图标一样，怎么就出不来了呢"),a("br"),s._v("\n最后的结果是")]),s._v(" "),a("p",[s._v("没！给！宽！高！\n我想shi")])]),s._v(" "),a("h2",{attrs:{id:"uni-ui的使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#uni-ui的使用"}},[s._v("#")]),s._v(" uni-ui的使用")]),s._v(" "),a("h3",{attrs:{id:"uni-forms"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#uni-forms"}},[s._v("#")]),s._v(" uni-forms")]),s._v(" "),a("ol",[a("li",[s._v("手动提交")])]),s._v(" "),a("details",{staticClass:"custom-block details"},[a("summary",[s._v("详情")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("<button @click=\"submitForm\">Submit</button>\n\n\nsubmitForm(form) {\n    // 手动提交表单 示例中的submit()方法即将废弃,所以使用validate方法\n    this.$refs.form.validate()\n\t.then(res => {\n\t\tconsole.log('表单的值：', res)\n\t})\n\t.catch(errors => {\n\t\tconsole.error('验证失败：', errors)\n\t})\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])])])])}),[],!1,null,null,null);t.default=e.exports}}]);