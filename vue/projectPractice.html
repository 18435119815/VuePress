<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>项目实践 | Mr哎呦喂的博客</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/VuePress/assets/img/icon1.png">
    <script>
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?e2bd54b8015cec977c6f30d0896b8a1b";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
      </script>
    <meta name="description" content="Mr哎呦喂的博客">
    
    <link rel="preload" href="/VuePress/assets/css/0.styles.b0c0e9a9.css" as="style"><link rel="preload" href="/VuePress/assets/js/app.77389705.js" as="script"><link rel="preload" href="/VuePress/assets/js/2.f648027b.js" as="script"><link rel="preload" href="/VuePress/assets/js/55.629dc3cf.js" as="script"><link rel="prefetch" href="/VuePress/assets/js/10.793af9a8.js"><link rel="prefetch" href="/VuePress/assets/js/11.14501879.js"><link rel="prefetch" href="/VuePress/assets/js/12.351754a2.js"><link rel="prefetch" href="/VuePress/assets/js/13.95d24b2f.js"><link rel="prefetch" href="/VuePress/assets/js/14.d6e28603.js"><link rel="prefetch" href="/VuePress/assets/js/15.2225ee2d.js"><link rel="prefetch" href="/VuePress/assets/js/16.82f3c6bd.js"><link rel="prefetch" href="/VuePress/assets/js/17.4b622f18.js"><link rel="prefetch" href="/VuePress/assets/js/18.b96a1fe9.js"><link rel="prefetch" href="/VuePress/assets/js/19.228fb954.js"><link rel="prefetch" href="/VuePress/assets/js/20.6d7ff204.js"><link rel="prefetch" href="/VuePress/assets/js/21.656b376f.js"><link rel="prefetch" href="/VuePress/assets/js/22.49afd7fc.js"><link rel="prefetch" href="/VuePress/assets/js/23.bf2cdecf.js"><link rel="prefetch" href="/VuePress/assets/js/24.0a71d660.js"><link rel="prefetch" href="/VuePress/assets/js/25.75e0ca4d.js"><link rel="prefetch" href="/VuePress/assets/js/26.14f4af4c.js"><link rel="prefetch" href="/VuePress/assets/js/27.43604d43.js"><link rel="prefetch" href="/VuePress/assets/js/28.0a4d129f.js"><link rel="prefetch" href="/VuePress/assets/js/29.c0dd3ae1.js"><link rel="prefetch" href="/VuePress/assets/js/3.def8e99c.js"><link rel="prefetch" href="/VuePress/assets/js/30.0f8ecc54.js"><link rel="prefetch" href="/VuePress/assets/js/31.15690ab4.js"><link rel="prefetch" href="/VuePress/assets/js/32.ce773f62.js"><link rel="prefetch" href="/VuePress/assets/js/33.1b7f11cf.js"><link rel="prefetch" href="/VuePress/assets/js/34.fce1b4f7.js"><link rel="prefetch" href="/VuePress/assets/js/35.52b59a1f.js"><link rel="prefetch" href="/VuePress/assets/js/36.4a1d4029.js"><link rel="prefetch" href="/VuePress/assets/js/37.3c6259ac.js"><link rel="prefetch" href="/VuePress/assets/js/38.b5fd8538.js"><link rel="prefetch" href="/VuePress/assets/js/39.43c9d4af.js"><link rel="prefetch" href="/VuePress/assets/js/4.a52fbc5c.js"><link rel="prefetch" href="/VuePress/assets/js/40.27954725.js"><link rel="prefetch" href="/VuePress/assets/js/41.b1e9fd7b.js"><link rel="prefetch" href="/VuePress/assets/js/42.231df8d4.js"><link rel="prefetch" href="/VuePress/assets/js/43.e4e36fb2.js"><link rel="prefetch" href="/VuePress/assets/js/44.960de7be.js"><link rel="prefetch" href="/VuePress/assets/js/45.d7703da7.js"><link rel="prefetch" href="/VuePress/assets/js/46.99da218d.js"><link rel="prefetch" href="/VuePress/assets/js/47.289386a6.js"><link rel="prefetch" href="/VuePress/assets/js/48.79e75876.js"><link rel="prefetch" href="/VuePress/assets/js/49.08fbbd56.js"><link rel="prefetch" href="/VuePress/assets/js/5.255f36ee.js"><link rel="prefetch" href="/VuePress/assets/js/50.cd3d7654.js"><link rel="prefetch" href="/VuePress/assets/js/51.3311bc9b.js"><link rel="prefetch" href="/VuePress/assets/js/52.7bd3bed3.js"><link rel="prefetch" href="/VuePress/assets/js/53.91e0dc2f.js"><link rel="prefetch" href="/VuePress/assets/js/54.2ee22880.js"><link rel="prefetch" href="/VuePress/assets/js/56.3f64904f.js"><link rel="prefetch" href="/VuePress/assets/js/57.00227383.js"><link rel="prefetch" href="/VuePress/assets/js/58.dccf5e58.js"><link rel="prefetch" href="/VuePress/assets/js/59.eb5f8e58.js"><link rel="prefetch" href="/VuePress/assets/js/6.c418f1b4.js"><link rel="prefetch" href="/VuePress/assets/js/60.5a7df88a.js"><link rel="prefetch" href="/VuePress/assets/js/61.5584fadb.js"><link rel="prefetch" href="/VuePress/assets/js/62.29dad797.js"><link rel="prefetch" href="/VuePress/assets/js/63.ec63103e.js"><link rel="prefetch" href="/VuePress/assets/js/64.846b515b.js"><link rel="prefetch" href="/VuePress/assets/js/7.92dbcd87.js"><link rel="prefetch" href="/VuePress/assets/js/8.55b43f35.js"><link rel="prefetch" href="/VuePress/assets/js/9.fb8ea612.js">
    <link rel="stylesheet" href="/VuePress/assets/css/0.styles.b0c0e9a9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/VuePress/" class="home-link router-link-active"><img src="/VuePress/assets/img/hero.png" alt="Mr哎呦喂的博客" class="logo"> <span class="site-name can-hide">Mr哎呦喂的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/VuePress/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/VuePress/myself/" class="nav-link">
  关于我
</a></div><div class="nav-item"><a href="/VuePress/lifeExperience/" class="nav-link">
  人生心得
</a></div><div class="nav-item"><a href="/VuePress/website/" class="nav-link">
  网址导航
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术文档" class="dropdown-title"><span class="title">技术文档</span> <span class="arrow down"></span></button> <button type="button" aria-label="技术文档" class="mobile-dropdown-title"><span class="title">技术文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          JS
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/VuePress/JS/" class="nav-link">
  基础使用
</a></li><li class="dropdown-subitem"><a href="/VuePress/browser/" class="nav-link">
  浏览器
</a></li></ul></li><li class="dropdown-item"><h4>
          vue
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/VuePress/vue/" class="nav-link router-link-active">
  基础知识
</a></li><li class="dropdown-subitem"><a href="/VuePress/vue/ssr/" class="nav-link">
  ssr
</a></li></ul></li><li class="dropdown-item"><h4>
          面试题
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/VuePress/interview/interviewText.html" class="nav-link">
  理论面试题
</a></li><li class="dropdown-subitem"><a href="/VuePress/interview/interviewMath.html" class="nav-link">
  实战面试题
</a></li><li class="dropdown-subitem"><a href="/VuePress/interview/project.html" class="nav-link">
  项目细节
</a></li></ul></li><li class="dropdown-item"><h4>
          其他知识
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/VuePress/knowledge/mobileAPP/" class="nav-link">
  移动端
</a></li><li class="dropdown-subitem"><a href="/VuePress/knowledge/typeScript/" class="nav-link">
  typeScript
</a></li><li class="dropdown-subitem"><a href="/VuePress/knowledge/other/" class="nav-link">
  其他常用
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他知识" class="dropdown-title"><span class="title">其他知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他知识" class="mobile-dropdown-title"><span class="title">其他知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/VuePress/other/camera.html" class="nav-link">
  相机
</a></li><li class="dropdown-item"><!----> <a href="/VuePress/other/fabric.html" class="nav-link">
  面料
</a></li><li class="dropdown-item"><!----> <a href="/VuePress/other/fund.html" class="nav-link">
  股票
</a></li><li class="dropdown-item"><!----> <a href="/VuePress/other/yueyu.html" class="nav-link">
  粤语
</a></li><li class="dropdown-item"><!----> <a href="/VuePress/other/Interface.html" class="nav-link">
  接口
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/VuePress/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/VuePress/myself/" class="nav-link">
  关于我
</a></div><div class="nav-item"><a href="/VuePress/lifeExperience/" class="nav-link">
  人生心得
</a></div><div class="nav-item"><a href="/VuePress/website/" class="nav-link">
  网址导航
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术文档" class="dropdown-title"><span class="title">技术文档</span> <span class="arrow down"></span></button> <button type="button" aria-label="技术文档" class="mobile-dropdown-title"><span class="title">技术文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          JS
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/VuePress/JS/" class="nav-link">
  基础使用
</a></li><li class="dropdown-subitem"><a href="/VuePress/browser/" class="nav-link">
  浏览器
</a></li></ul></li><li class="dropdown-item"><h4>
          vue
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/VuePress/vue/" class="nav-link router-link-active">
  基础知识
</a></li><li class="dropdown-subitem"><a href="/VuePress/vue/ssr/" class="nav-link">
  ssr
</a></li></ul></li><li class="dropdown-item"><h4>
          面试题
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/VuePress/interview/interviewText.html" class="nav-link">
  理论面试题
</a></li><li class="dropdown-subitem"><a href="/VuePress/interview/interviewMath.html" class="nav-link">
  实战面试题
</a></li><li class="dropdown-subitem"><a href="/VuePress/interview/project.html" class="nav-link">
  项目细节
</a></li></ul></li><li class="dropdown-item"><h4>
          其他知识
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/VuePress/knowledge/mobileAPP/" class="nav-link">
  移动端
</a></li><li class="dropdown-subitem"><a href="/VuePress/knowledge/typeScript/" class="nav-link">
  typeScript
</a></li><li class="dropdown-subitem"><a href="/VuePress/knowledge/other/" class="nav-link">
  其他常用
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他知识" class="dropdown-title"><span class="title">其他知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他知识" class="mobile-dropdown-title"><span class="title">其他知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/VuePress/other/camera.html" class="nav-link">
  相机
</a></li><li class="dropdown-item"><!----> <a href="/VuePress/other/fabric.html" class="nav-link">
  面料
</a></li><li class="dropdown-item"><!----> <a href="/VuePress/other/fund.html" class="nav-link">
  股票
</a></li><li class="dropdown-item"><!----> <a href="/VuePress/other/yueyu.html" class="nav-link">
  粤语
</a></li><li class="dropdown-item"><!----> <a href="/VuePress/other/Interface.html" class="nav-link">
  接口
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/VuePress/vue/vue.html" class="sidebar-link">vue2</a></li><li><a href="/VuePress/vue/vue-x.html" class="sidebar-link">vue-x</a></li><li><a href="/VuePress/vue/vue-router.html" class="sidebar-link">vue路由</a></li><li><a href="/VuePress/vue/sourceCode.html" class="sidebar-link">源码</a></li><li><a href="/VuePress/vue/ssr.html" class="sidebar-link">SSR</a></li><li><a href="/VuePress/vue/project.html" class="sidebar-link">从零开始创建一个vue项目</a></li><li><a href="/VuePress/vue/vue3.html" class="sidebar-link">vue3新特性</a></li><li><a href="/VuePress/vue/vite.html" class="sidebar-link">Vite</a></li><li><a href="/VuePress/vue/projectPractice.html" aria-current="page" class="active sidebar-link">项目实践</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/VuePress/vue/projectPractice.html#axios" class="sidebar-link">axios</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/VuePress/vue/projectPractice.html#全局axios封装" class="sidebar-link">全局axios封装</a></li><li class="sidebar-sub-header"><a href="/VuePress/vue/projectPractice.html#接口统一管理" class="sidebar-link">接口统一管理</a></li></ul></li><li class="sidebar-sub-header"><a href="/VuePress/vue/projectPractice.html#vue-config-js" class="sidebar-link">vue.config.js</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/VuePress/vue/projectPractice.html#proxy代理" class="sidebar-link">proxy代理</a></li></ul></li><li class="sidebar-sub-header"><a href="/VuePress/vue/projectPractice.html#vue-router" class="sidebar-link">vue-router</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/VuePress/vue/projectPractice.html#路由拦截" class="sidebar-link">路由拦截</a></li><li class="sidebar-sub-header"><a href="/VuePress/vue/projectPractice.html#路由权限" class="sidebar-link">路由权限</a></li></ul></li><li class="sidebar-sub-header"><a href="/VuePress/vue/projectPractice.html#vue-x" class="sidebar-link">Vue-x</a></li><li class="sidebar-sub-header"><a href="/VuePress/vue/projectPractice.html#keep-alive" class="sidebar-link">keep-alive</a></li><li class="sidebar-sub-header"><a href="/VuePress/vue/projectPractice.html#filters过滤" class="sidebar-link">filters过滤</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/VuePress/vue/projectPractice.html#批量注册过滤器" class="sidebar-link">批量注册过滤器</a></li></ul></li><li class="sidebar-sub-header"><a href="/VuePress/vue/projectPractice.html#组件" class="sidebar-link">组件</a></li><li class="sidebar-sub-header"><a href="/VuePress/vue/projectPractice.html#常用功能" class="sidebar-link">常用功能</a></li><li class="sidebar-sub-header"><a href="/VuePress/vue/projectPractice.html#项目优化" class="sidebar-link">项目优化</a></li><li class="sidebar-sub-header"><a href="/VuePress/vue/projectPractice.html#小知识" class="sidebar-link">小知识</a></li></ul></li><li><a href="/VuePress/vue/uniapp.html" class="sidebar-link">使用uniapp开发微信小程序</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="项目实践"><a href="#项目实践" class="header-anchor">#</a> 项目实践</h1> <h2 id="axios"><a href="#axios" class="header-anchor">#</a> axios</h2> <h3 id="全局axios封装"><a href="#全局axios封装" class="header-anchor">#</a> 全局axios封装</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>import axios from 'axios';

//配置一个新的axios：域名、请求头、超时时间(axios.create)
//有不同的域名的话   可以创建多个axios
const service = axios.create({
  baseURL: process.env.VUE_APP_BASE_API, // 前置域名配置 url = base url + request url
  withCredentials: true, // 是否将cookie信息一起传给后端
  headers: {
    'Content-Type': 'text/plain;charset=UTF-8'
  },
  timeout: 25000 // 超时时间
});

// 添加请求拦截器
axios.interceptors.request.use(config=&gt;{
	// config 请求配置(包含了baseURL、headers、method、params、timeout、url等信息，均可以进行对应处理)
    //携带token
    if(let token = window.sessionStorage.getItem('token')){
        config.headers.Authorization = token
    }
	// 可用于发送网络请求时，在界面显示loading动画
	// 某些请求（比如登录（token））必须携带一些特殊的信息
    if (config.method === 'post') {
      config.data = config.params;
      config.params = {};
    }

    return config
},err=&gt;{
	// 请求失败拦截
    return Promise.reject(err)
})  

// 添加响应拦截器
axios.interceptors.response.use(response=&gt;{
	// res 响应结果
	// 根据返回回来的状态码进行对应的处理
    const res = response.data;
    if (res.code !== 200) {

    }else {
      return res.data;
    }
},err=&gt;{
	// 响应拦失败拦截
    return Promise.reject(err)
}) 

export default service;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br></div></div><h3 id="接口统一管理"><a href="#接口统一管理" class="header-anchor">#</a> 接口统一管理</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>import axios from '@/utils/request';

export function registerCode(data) {
    return axios({
        url: `/registerSendMsg`,
        method: 'post',
        data
    });
}

export function registerCode(data) {
    return axios({
        url: `/registerSendMsg`,
        method: 'get',
        params:data
    });
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="vue-config-js"><a href="#vue-config-js" class="header-anchor">#</a> vue.config.js</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>//安装依赖
const CompressionWebpackPlugin = require(&quot;compression-webpack-plugin&quot;)

//配置对象
module.exports = {
    publicPath:'/',             //项目前置路径,用法和 webpack 本身的 output.publicPath 一致
    lintOnSave:false,           //每次保存代码是否要通过lint检测  boolean | 'warning' | 'default' | 'error'

    &lt;!-- 打包相关 --&gt;
    outputDir:'dist',           //打包文件输出目录,用法和 webpack 的 output.path一致
    assetsDir:'static',         //打包文件中放置静态资源的目录css、img、font等
    indexPath:'index.html',     //制定生成的index.html生成路径
    filenameHashing:true,       //文件名hash，更好的控制缓存，改为false即关闭


    devServer:{
        port:8088,              //默认端口
        open: true,
        overlay: {
            warnings: false,
            errors: true
        },
        proxy: {                //接口代理服务
            [process.env.VUE_APP_BASE_API]: {
                target: `代理地址`,
                changeOrigin: true,
                pathRewrite: {
                    ['^' + process.env.VUE_APP_BASE_API]: '需要重写的部分'
                }
            }
        },
    },

    &lt;!-- webpack相关 --&gt;
    //因为vuecli3中已经不能直接修改webpack配置，所以需要通过这个属性
    configureWebpack:config=&gt;{
        let plugins = [
            new CompressionWebpackPlugin({
                algorithm:'gzip',       //压缩方式
                test:/\.js$|\.css$/,    //匹配压缩文件
                threshold:10240         //大于10k的压缩
            })
        ]
        if(process.env.NODE_ENV === 'production'){
            config.mode = 'production';
            config.plugins = [...config.plugins,...plugins]
        }else{
            config.mode = 'development'
        }
        //打包的时候将第三方包排除出去，减少体积，
        Obiect.assign(config,{
            externals:{
                vue:'Vue',
                axios:'axios'
            }
        })
    }
    chainWebpack：{             //链式操作，可以更细粒度控制webpack内部配置。
        name: '项目名称',
        resolve: {
            alias: {
                '@': resolve('src')
            }
        }
    },           
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br></div></div><h3 id="proxy代理"><a href="#proxy代理" class="header-anchor">#</a> proxy代理</h3> <ol><li>新建.env.development和.env.production文件夹</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>ENV = 'development'
VUE_APP_BASE_API = '/dev-api'
VUE_CLI_BABEL_TRANSPILE_MODULES = true


ENV = 'production'
VUE_APP_BASE_API = '/prod-api'
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol start="2"><li>vue.config.js中</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>    devServer:{
        port:8088,              //默认端口
        proxy: {                //接口代理服务
            [process.env.VUE_APP_BASE_API]: {
                target: `代理地址`,
                changeOrigin: true,
                pathRewrite: {
                    ['^' + process.env.VUE_APP_BASE_API]: '需要重写的部分'
                }
            }
        },
    },
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="vue-router"><a href="#vue-router" class="header-anchor">#</a> vue-router</h2> <h3 id="路由拦截"><a href="#路由拦截" class="header-anchor">#</a> 路由拦截</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>router.beforeEach((to, from, next) =&gt; {
    //给每一页更换标题
    if (to.meta.title) {
        document.title = to.meta.title
    }
    //判断要去的页面是否需要登录
    if (to.matched.some(res =&gt; res.meta.isLogin)) { 
        从本地存储中查找token，如果有，则跳转
        没有的话，先尝试获取用户信息，获取到继续跳转
        获取不到，就去登录页面
    } else {
        //不需要的话直接跳转
        next()
    }
});
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="路由权限"><a href="#路由权限" class="header-anchor">#</a> 路由权限</h3> <ol><li>后端保存单个路由对象(非树状结构)，获取用户id之后，在表中筛选出合适的路由列表，返回前端，由前端拼成树结构并展示渲染。</li></ol> <details class="custom-block details"><summary>将后端传来的数据拼接成树状的过程</summary> <div class="language- extra-class"><pre><code>function tree(data) {
    //首先将一级菜单跟其他级别的菜单分开
    let parents = data.filter(a =&gt; a.pid === 0),
        children = data.filter(a =&gt; a.pid != 0);


    madeTree(parents,children);

    //因为确定二级菜单之后还要确定三级菜单，需要用到递归，所以我们写个递归函数
    function madeTree(parents,children) {
        parents.map(p =&gt; {
            children.map((c,i)=&gt; {
                //先找到二级菜单
                if (c.pid === p.id) {                       
                   // 1.  将二级菜单放入一级菜单的children
                   if(p.children){
                       p.children.push(c)
                   }else{
                       p.children = [c]
                   }
                   //2.   将该二级菜单与其他的children比较，找出三级菜单
                   //复制一份children，并将当前二级菜单项剔除
                   let _children = JSON.parse(JSON.stringify(children));
                   _children.splice(i,1);
                   //递归
                   madeTree([c],_children)
                }
            })
        })
    }

    return parents
}
</code></pre></div></details> <details class="custom-block details"><summary>接着再通过映射给路由数据中添加component属性</summary> <div class="language- extra-class"><pre><code>function realRoutes(routes){
    let newRoutes = routes.map(r=&gt;{
        let route = {
            name:r.name,
            path:r.path,
            component:() =&gt; import(`@/views/${r.name}`)
        }

        if(r.children){
            route.children = realRoutes(r.children)
        }

        return route
    })

    return newRoutes
}
</code></pre></div></details> <h2 id="vue-x"><a href="#vue-x" class="header-anchor">#</a> Vue-x</h2> <ol><li>state、moutations、actions分别建立文件再单个引入
<img src="/assets/img/vue/vuex1.jpg" width="500" height="auto" align="middle"></li></ol> <h2 id="keep-alive"><a href="#keep-alive" class="header-anchor">#</a> keep-alive</h2> <h2 id="filters过滤"><a href="#filters过滤" class="header-anchor">#</a> filters过滤</h2> <h3 id="批量注册过滤器"><a href="#批量注册过滤器" class="header-anchor">#</a> 批量注册过滤器</h3> <ol><li>建立一个存放过滤函数的filters.js文件</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>export function sex(value){
    switch(value){
        case '':
            break;
        case '':
            break;
    }
}

export function name(value){
    switch(value){
        case '':
            break;
        case '':
            break;
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><ol start="2"><li>建立一个批量注册的index.js文件</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>import * as filters from './filters.js'

Object.keys(filters).forEach(v=&gt;{
    Vue.filter(v,filters[v])
})
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ol start="3"><li>在main.js中引入
<code>import './filters/index'</code></li></ol> <h2 id="组件"><a href="#组件" class="header-anchor">#</a> 组件</h2> <p>一个页面由多个自定义组件组成的时候，我们除了一个一个引入，还有一种更便于理解的方法：</p> <ol><li>在放置自定义组件的components组件中定义一个js文件</li> <li>将各个组件引入</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>export {default as Header} from './header'
export {default as Siderbar} from './siderbar'
export {default as Main} from './main'
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ol start="3"><li>在页面中引入
<code>import {Header、Siderbar、Main}</code>from './components'</li></ol> <h2 id="常用功能"><a href="#常用功能" class="header-anchor">#</a> 常用功能</h2> <ol><li>下载
如果是无权限文件，后端直接返回一个下载地址，前端打开即可。<br>
如果是需要权限的，前端先发起请求，向后端请求一个url。再拿着url以及token向后端请求流文件，拿到之后进行解析即可。</li></ol> <h2 id="项目优化"><a href="#项目优化" class="header-anchor">#</a> 项目优化</h2> <ol><li>在vue.config.js中开启文件压缩，对于JS\CSS文件进行压缩处理</li> <li>对于第三方包进行拆分，比如vue、elementui、axios，打包的时候排除在外。然后在index.html中通过cdn的方式引入</li> <li>没有cdn的话，可以把第三方包下载下来单独引入，这样第一次加载就会被缓存，后面打开的速度就大大提升了</li></ol> <h2 id="小知识"><a href="#小知识" class="header-anchor">#</a> 小知识</h2> <ol><li><p>查看webpack默认配置  <code>vue inspect</code>  只查看规则配置<code>vue inspect --rules</code> 查看某一项具体规则<code>vue inspect --rule 名称(例如svg)</code><br> <img src="/assets/img/vueConfig1.jpg" width="350" height="200" align="middle"> <img src="/assets/img/vueConfig2.jpg" width="350" height="200" align="middle"></p></li> <li><p>lodash插值语法</p></li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>//在根目录的index.html中使用configureWebpack的name属性
&lt;title&gt;&lt;%= webpackConfig.name %&gt;&lt;/title&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="3"><li>chainWebpack范例:svg icon引入</li></ol> <ul><li><p>下载图标，存入src/icons/svg中</p></li> <li><p>安装依赖：svg-sprite-loader<br> <code>npm i svg-sprite-loader -D</code></p></li> <li><p>修改规则和新增规则</p></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>//vue.config.js中
// resolve定义一个绝对路径获取函数 
const path = require('path')
function resolve(dir) {
    return path.join(__dirname, dir)
}
//... 
chainWebpack(config) {
    // 配置svg规则排除icons目录中svg文件处理 
    // 目标给svg规则增加一个排除选项exclude: ['path/to/icon']
    config.module.rule(&quot;svg&quot;).exclude.add(resolve(&quot;src/icons&quot;))
    // 新增icons规则，设置svg-sprite-loader处理icons目录中的svg 
    config.module.rule('icons')
    .test(/\.svg$/)
    .include.add(resolve('./src/icons')).end()
    .use('svg-sprite-loader')
    .loader('svg-sprite-loader')
    .options({ symbolId: 'icon-[name]' })
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><ul><li>组件中使用</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;template&gt;
  &lt;svg&gt;
    &lt;use xlink:href=&quot;#icon-wx&quot; /&gt;
  &lt;/svg&gt;
&lt;/template&gt; 
&lt;script&gt; 
  import '@/icons/svg/wx.svg' 
  export default {}
&lt;/script&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li>由于项目中的icon可能过多，我们不能每一个都单独引入，因此需要工程化配置</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>//新建src/icons/index.js
//webpack创建一个以svg目录为上下文的require函数
const req = require.context('./svg', false, /\.svg$/) 
//keys会获取所有的svg文件
req.keys().map(req);
//在main.js中引入该文件 @import '@/icons' 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/VuePress/vue/vite.html" class="prev">
        Vite
      </a></span> <span class="next"><a href="/VuePress/vue/uniapp.html">
        使用uniapp开发微信小程序
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/VuePress/assets/js/app.77389705.js" defer></script><script src="/VuePress/assets/js/2.f648027b.js" defer></script><script src="/VuePress/assets/js/55.629dc3cf.js" defer></script>
  </body>
</html>
