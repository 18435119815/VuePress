<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>移动端开发 | Mr哎呦喂的博客</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/VuePress/assets/img/icon1.png">
    <script>
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?e2bd54b8015cec977c6f30d0896b8a1b";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
      </script>
    <meta name="description" content="Mr哎呦喂的博客">
    
    <link rel="preload" href="/VuePress/assets/css/0.styles.b0c0e9a9.css" as="style"><link rel="preload" href="/VuePress/assets/js/app.77389705.js" as="script"><link rel="preload" href="/VuePress/assets/js/2.f648027b.js" as="script"><link rel="preload" href="/VuePress/assets/js/31.15690ab4.js" as="script"><link rel="prefetch" href="/VuePress/assets/js/10.793af9a8.js"><link rel="prefetch" href="/VuePress/assets/js/11.14501879.js"><link rel="prefetch" href="/VuePress/assets/js/12.351754a2.js"><link rel="prefetch" href="/VuePress/assets/js/13.95d24b2f.js"><link rel="prefetch" href="/VuePress/assets/js/14.d6e28603.js"><link rel="prefetch" href="/VuePress/assets/js/15.2225ee2d.js"><link rel="prefetch" href="/VuePress/assets/js/16.82f3c6bd.js"><link rel="prefetch" href="/VuePress/assets/js/17.4b622f18.js"><link rel="prefetch" href="/VuePress/assets/js/18.b96a1fe9.js"><link rel="prefetch" href="/VuePress/assets/js/19.228fb954.js"><link rel="prefetch" href="/VuePress/assets/js/20.6d7ff204.js"><link rel="prefetch" href="/VuePress/assets/js/21.656b376f.js"><link rel="prefetch" href="/VuePress/assets/js/22.49afd7fc.js"><link rel="prefetch" href="/VuePress/assets/js/23.bf2cdecf.js"><link rel="prefetch" href="/VuePress/assets/js/24.0a71d660.js"><link rel="prefetch" href="/VuePress/assets/js/25.75e0ca4d.js"><link rel="prefetch" href="/VuePress/assets/js/26.14f4af4c.js"><link rel="prefetch" href="/VuePress/assets/js/27.43604d43.js"><link rel="prefetch" href="/VuePress/assets/js/28.0a4d129f.js"><link rel="prefetch" href="/VuePress/assets/js/29.c0dd3ae1.js"><link rel="prefetch" href="/VuePress/assets/js/3.def8e99c.js"><link rel="prefetch" href="/VuePress/assets/js/30.0f8ecc54.js"><link rel="prefetch" href="/VuePress/assets/js/32.ce773f62.js"><link rel="prefetch" href="/VuePress/assets/js/33.1b7f11cf.js"><link rel="prefetch" href="/VuePress/assets/js/34.fce1b4f7.js"><link rel="prefetch" href="/VuePress/assets/js/35.52b59a1f.js"><link rel="prefetch" href="/VuePress/assets/js/36.4a1d4029.js"><link rel="prefetch" href="/VuePress/assets/js/37.3c6259ac.js"><link rel="prefetch" href="/VuePress/assets/js/38.b5fd8538.js"><link rel="prefetch" href="/VuePress/assets/js/39.43c9d4af.js"><link rel="prefetch" href="/VuePress/assets/js/4.a52fbc5c.js"><link rel="prefetch" href="/VuePress/assets/js/40.27954725.js"><link rel="prefetch" href="/VuePress/assets/js/41.b1e9fd7b.js"><link rel="prefetch" href="/VuePress/assets/js/42.231df8d4.js"><link rel="prefetch" href="/VuePress/assets/js/43.e4e36fb2.js"><link rel="prefetch" href="/VuePress/assets/js/44.960de7be.js"><link rel="prefetch" href="/VuePress/assets/js/45.d7703da7.js"><link rel="prefetch" href="/VuePress/assets/js/46.99da218d.js"><link rel="prefetch" href="/VuePress/assets/js/47.289386a6.js"><link rel="prefetch" href="/VuePress/assets/js/48.79e75876.js"><link rel="prefetch" href="/VuePress/assets/js/49.08fbbd56.js"><link rel="prefetch" href="/VuePress/assets/js/5.255f36ee.js"><link rel="prefetch" href="/VuePress/assets/js/50.cd3d7654.js"><link rel="prefetch" href="/VuePress/assets/js/51.3311bc9b.js"><link rel="prefetch" href="/VuePress/assets/js/52.7bd3bed3.js"><link rel="prefetch" href="/VuePress/assets/js/53.91e0dc2f.js"><link rel="prefetch" href="/VuePress/assets/js/54.2ee22880.js"><link rel="prefetch" href="/VuePress/assets/js/55.629dc3cf.js"><link rel="prefetch" href="/VuePress/assets/js/56.3f64904f.js"><link rel="prefetch" href="/VuePress/assets/js/57.00227383.js"><link rel="prefetch" href="/VuePress/assets/js/58.dccf5e58.js"><link rel="prefetch" href="/VuePress/assets/js/59.eb5f8e58.js"><link rel="prefetch" href="/VuePress/assets/js/6.c418f1b4.js"><link rel="prefetch" href="/VuePress/assets/js/60.5a7df88a.js"><link rel="prefetch" href="/VuePress/assets/js/61.5584fadb.js"><link rel="prefetch" href="/VuePress/assets/js/62.29dad797.js"><link rel="prefetch" href="/VuePress/assets/js/63.ec63103e.js"><link rel="prefetch" href="/VuePress/assets/js/64.846b515b.js"><link rel="prefetch" href="/VuePress/assets/js/7.92dbcd87.js"><link rel="prefetch" href="/VuePress/assets/js/8.55b43f35.js"><link rel="prefetch" href="/VuePress/assets/js/9.fb8ea612.js">
    <link rel="stylesheet" href="/VuePress/assets/css/0.styles.b0c0e9a9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/VuePress/" class="home-link router-link-active"><img src="/VuePress/assets/img/hero.png" alt="Mr哎呦喂的博客" class="logo"> <span class="site-name can-hide">Mr哎呦喂的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/VuePress/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/VuePress/myself/" class="nav-link">
  关于我
</a></div><div class="nav-item"><a href="/VuePress/lifeExperience/" class="nav-link">
  人生心得
</a></div><div class="nav-item"><a href="/VuePress/website/" class="nav-link">
  网址导航
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术文档" class="dropdown-title"><span class="title">技术文档</span> <span class="arrow down"></span></button> <button type="button" aria-label="技术文档" class="mobile-dropdown-title"><span class="title">技术文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          JS
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/VuePress/JS/" class="nav-link">
  基础使用
</a></li><li class="dropdown-subitem"><a href="/VuePress/browser/" class="nav-link">
  浏览器
</a></li></ul></li><li class="dropdown-item"><h4>
          vue
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/VuePress/vue/" class="nav-link">
  基础知识
</a></li><li class="dropdown-subitem"><a href="/VuePress/vue/ssr/" class="nav-link">
  ssr
</a></li></ul></li><li class="dropdown-item"><h4>
          面试题
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/VuePress/interview/interviewText.html" class="nav-link">
  理论面试题
</a></li><li class="dropdown-subitem"><a href="/VuePress/interview/interviewMath.html" class="nav-link">
  实战面试题
</a></li><li class="dropdown-subitem"><a href="/VuePress/interview/project.html" class="nav-link">
  项目细节
</a></li></ul></li><li class="dropdown-item"><h4>
          其他知识
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/VuePress/knowledge/mobileAPP/" class="nav-link">
  移动端
</a></li><li class="dropdown-subitem"><a href="/VuePress/knowledge/typeScript/" class="nav-link">
  typeScript
</a></li><li class="dropdown-subitem"><a href="/VuePress/knowledge/other/" class="nav-link">
  其他常用
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他知识" class="dropdown-title"><span class="title">其他知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他知识" class="mobile-dropdown-title"><span class="title">其他知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/VuePress/other/camera.html" class="nav-link">
  相机
</a></li><li class="dropdown-item"><!----> <a href="/VuePress/other/fabric.html" class="nav-link">
  面料
</a></li><li class="dropdown-item"><!----> <a href="/VuePress/other/fund.html" class="nav-link">
  股票
</a></li><li class="dropdown-item"><!----> <a href="/VuePress/other/yueyu.html" class="nav-link">
  粤语
</a></li><li class="dropdown-item"><!----> <a href="/VuePress/other/Interface.html" class="nav-link">
  接口
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/VuePress/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/VuePress/myself/" class="nav-link">
  关于我
</a></div><div class="nav-item"><a href="/VuePress/lifeExperience/" class="nav-link">
  人生心得
</a></div><div class="nav-item"><a href="/VuePress/website/" class="nav-link">
  网址导航
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术文档" class="dropdown-title"><span class="title">技术文档</span> <span class="arrow down"></span></button> <button type="button" aria-label="技术文档" class="mobile-dropdown-title"><span class="title">技术文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          JS
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/VuePress/JS/" class="nav-link">
  基础使用
</a></li><li class="dropdown-subitem"><a href="/VuePress/browser/" class="nav-link">
  浏览器
</a></li></ul></li><li class="dropdown-item"><h4>
          vue
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/VuePress/vue/" class="nav-link">
  基础知识
</a></li><li class="dropdown-subitem"><a href="/VuePress/vue/ssr/" class="nav-link">
  ssr
</a></li></ul></li><li class="dropdown-item"><h4>
          面试题
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/VuePress/interview/interviewText.html" class="nav-link">
  理论面试题
</a></li><li class="dropdown-subitem"><a href="/VuePress/interview/interviewMath.html" class="nav-link">
  实战面试题
</a></li><li class="dropdown-subitem"><a href="/VuePress/interview/project.html" class="nav-link">
  项目细节
</a></li></ul></li><li class="dropdown-item"><h4>
          其他知识
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/VuePress/knowledge/mobileAPP/" class="nav-link">
  移动端
</a></li><li class="dropdown-subitem"><a href="/VuePress/knowledge/typeScript/" class="nav-link">
  typeScript
</a></li><li class="dropdown-subitem"><a href="/VuePress/knowledge/other/" class="nav-link">
  其他常用
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他知识" class="dropdown-title"><span class="title">其他知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他知识" class="mobile-dropdown-title"><span class="title">其他知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/VuePress/other/camera.html" class="nav-link">
  相机
</a></li><li class="dropdown-item"><!----> <a href="/VuePress/other/fabric.html" class="nav-link">
  面料
</a></li><li class="dropdown-item"><!----> <a href="/VuePress/other/fund.html" class="nav-link">
  股票
</a></li><li class="dropdown-item"><!----> <a href="/VuePress/other/yueyu.html" class="nav-link">
  粤语
</a></li><li class="dropdown-item"><!----> <a href="/VuePress/other/Interface.html" class="nav-link">
  接口
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/VuePress/knowledge/littleKnowledge.html" class="sidebar-link">前端相关</a></li><li><a href="/VuePress/knowledge/elementUI.html" class="sidebar-link">Element-ui</a></li><li><a href="/VuePress/knowledge/vscode.html" class="sidebar-link">vscode</a></li><li><a href="/VuePress/knowledge/mobileAPP.html" aria-current="page" class="active sidebar-link">移动端开发</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/VuePress/knowledge/mobileAPP.html#分类" class="sidebar-link">分类</a></li><li class="sidebar-sub-header"><a href="/VuePress/knowledge/mobileAPP.html#微信小程序" class="sidebar-link">微信小程序</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/VuePress/knowledge/mobileAPP.html#目录结构" class="sidebar-link">目录结构</a></li><li class="sidebar-sub-header"><a href="/VuePress/knowledge/mobileAPP.html#标签对照" class="sidebar-link">标签对照</a></li><li class="sidebar-sub-header"><a href="/VuePress/knowledge/mobileAPP.html#牛刀小试" class="sidebar-link">牛刀小试</a></li><li class="sidebar-sub-header"><a href="/VuePress/knowledge/mobileAPP.html#云开发" class="sidebar-link">云开发</a></li></ul></li><li class="sidebar-sub-header"><a href="/VuePress/knowledge/mobileAPP.html#移动端布局" class="sidebar-link">移动端布局</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/VuePress/knowledge/mobileAPP.html#vw-vh布局" class="sidebar-link">vw/vh布局</a></li><li class="sidebar-sub-header"><a href="/VuePress/knowledge/mobileAPP.html#优化策略" class="sidebar-link">优化策略</a></li></ul></li></ul></li><li><a href="/VuePress/knowledge/webpack.html" class="sidebar-link">webpack</a></li><li><a href="/VuePress/knowledge/error.html" class="sidebar-link">常见报错</a></li><li><a href="/VuePress/knowledge/other.html" class="sidebar-link">其他知识</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="移动端开发"><a href="#移动端开发" class="header-anchor">#</a> 移动端开发</h1> <h2 id="分类"><a href="#分类" class="header-anchor">#</a> 分类</h2> <img src="/assets/img/mobileaAPP.jpg" width="500" height="auto" align="middle"> <p>类似于uniapp、微信小程序这种的称为webview,通过Javascript bridge与后台进行交互</p> <h4 id="优点"><a href="#优点" class="header-anchor">#</a> 优点</h4> <ul><li>一套代码就够了，而且用的是web前端语言</li></ul> <h4 id="缺点"><a href="#缺点" class="header-anchor">#</a> 缺点</h4> <ul><li>中间有Javascript bridge桥梁，性能大大的受到影响</li></ul> <h2 id="微信小程序"><a href="#微信小程序" class="header-anchor">#</a> 微信小程序</h2> <h3 id="目录结构"><a href="#目录结构" class="header-anchor">#</a> 目录结构</h3> <img src="/assets/img/smallRoutine.jpg" width="550" height="auto" align="middle"> <ul><li>.json  json配置文件</li> <li>.wxml  模板文件(相当于html)</li> <li>.wxss  样式文件(相当于css)</li> <li>.js    json配置文件</li></ul> <h3 id="标签对照"><a href="#标签对照" class="header-anchor">#</a> 标签对照</h3> <table><thead><tr><th>备注</th> <th>HTML</th> <th>vue</th> <th>微信</th></tr></thead> <tbody><tr><td>基础标签</td> <td>div</td> <td>div</td> <td>view</td></tr> <tr><td>点击事件</td> <td>onclick</td> <td>@click</td> <td>bindtap</td></tr> <tr><td>事件函数的位置</td> <td>js标签内</td> <td>事件写在methods中</td> <td>所有事件与data,生命周期函数平级</td></tr> <tr><td>数据修改</td> <td>获取dom并修改</td> <td>this.msg=''</td> <td>this.setData({msg:''})</td></tr> <tr><td>数据循环遍历</td> <td></td> <td>v-for='(item,index)in list' :key='index'</td> <td>wx:for='{{list}'   wx:key='id'</td></tr> <tr><td></td> <td></td> <td></td> <td></td></tr></tbody></table> <h3 id="牛刀小试"><a href="#牛刀小试" class="header-anchor">#</a> 牛刀小试</h3> <blockquote><p>小程序的API很丰富，可以很轻易的实现一些复杂的功能，下面来演示几个</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>//⾮非常简单就可以实现微信客服的功能  但是需要在小程序后台配置页面提前绑定好客服人员的微信
&lt;view&gt;
    &lt;text&gt; hello world&lt;/text&gt;
    &lt;button type=&quot;primary&quot; open-type=&quot;contact&quot;&gt;客服&lt;/button&gt;
&lt;/view&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>//照相功能
// html
&lt;camera device-position=&quot;back&quot; style=&quot;width: 100%; height: 300px;&quot;&gt;&lt;/camera&gt;
    &lt;button type=&quot;primary&quot; bindtap=&quot;takePhoto&quot;&gt;拍照&lt;/button&gt;
&lt;image mode=&quot;widthFix&quot; src=&quot;{{src}}&quot;&gt;&lt;/image&gt;

//js
Page({
    data: {
        src: &quot;&quot;,
    }
    takePhoto() {
        let ctx = wx.createCameraContext();
        ctx.takePhoto({
            success: res =&gt; {
                console.log(res);
                //有点像react setState
                this.setData({
                src: res.tempImagePath
                })
            }
        })
    }
})
//保存之后点击拍照按钮就能看到自己的帅照了哈哈哈哈
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h3 id="云开发"><a href="#云开发" class="header-anchor">#</a> 云开发</h3> <ul><li>简单点说就是一个人即可完成前后端的工作</li> <li>开发者可以使⽤用云开发开发微信小程序、小游戏，无需搭建服务器器，即可使用云端能力（Serverless 服
务）。</li> <li>Serverless = server + less (“少服务器的，或是⽆服务器的”)</li> <li>云开发为开发者提供完整的原生云端⽀支持和微信服务支持，弱化后端和运维概念，⽆需搭建服务器，使
⽤平台提供的 API 进行核心业务开发，即可实现快速上线和迭代，同时这一能⼒，同开发者已经使用的
云服务相互兼容，并不互斥。</li></ul> <h4 id="开通"><a href="#开通" class="header-anchor">#</a> 开通</h4> <blockquote><p>在创建小程序时，后端服务处选择 云开发 选项即可(必须要填写AppID，不可使用测试号)。接着点击编辑器上的云开发按钮，编写一个自己的环境名称，开通一下云开发功能~</p></blockquote> <img src="/assets/img/cloudDevelopment.jpg" width="500" height="auto" align="middle"> <h4 id="小知识"><a href="#小知识" class="header-anchor">#</a> 小知识</h4> <ul><li>云函数就是一个node应用</li> <li>云函数一旦部署到云端，即可在自己的个人项目中随意调用，不同项目也可，因为云函数名称唯一</li></ul> <h4 id="牛刀小试-2"><a href="#牛刀小试-2" class="header-anchor">#</a> 牛刀小试</h4> <ol><li>在cloudfunctions文件上单击右键，选择新建Node.js云函数，填写名称(此处假设文件名为test)，会得到一个有着如下目录的文件夹
<ul><li>config.json</li> <li>index.js</li> <li>package.json</li></ul></li> <li>打开index.js 这里就是我们写逻辑的地方</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>    // 云函数入口文件
    const cloud = require('wx-server-sdk')

    cloud.init()

    // 云函数入口函数
    exports.main = async (event, context) =&gt; { //event就是接收前端传过来的参数对象
        const wxContext = cloud.getWXContext()
        let {a,b} = event;
        return {
            sum:a+b
        }
    }
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ol start="3"><li><p>在test文件夹上单击右键，选择 上传并部署，云端安装依赖，然后等待几秒...</p> <p>页面中出现 '更新云函数test的调用权限' 以及  '上传云函数test'之后，即为上传成功</p></li> <li><p>在前端页面的任意一个事件中调用</p></li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>    wx.cloud.callFunction({ //调用云函数的API
        name:'book',        //云函数名称
        data:{              //要传递的参数
            a:521,
            b:1314
        },
        success:res=&gt;{      //成功的回调函数
            console.log(res)
        }
    })
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ol start="5"><li>成功后控制台输出如下,result就是我们拿到的后台返回数据</li></ol> <img src="/assets/img/cloudFucTest.jpg" width="700" height="auto" align="middle"> <h4 id="提枪上阵"><a href="#提枪上阵" class="header-anchor">#</a> 提枪上阵</h4> <p>有了上面那些知识，我们就可以开始为所欲为了,别忘了去补充一下数据库操作的知识，<a href="https://developers.weixin.qq.com/miniprogram/dev/wxcloud/basis/capabilities.html#%E6%95%B0%E6%8D%AE%E5%BA%93" target="_blank" rel="noopener noreferrer">点击查看<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br>
接下来实现一个微信扫码图书二维码的爬虫案例</p> <ol><li>新建node.js云函数</li> <li>在云函数目录的index.js中写入以下代码</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>// 云函数入口文件
const cloud = require('wx-server-sdk')
//需要安装以下两个依赖 npm i  名称 --save 并导入
const axios = require('axios')
const doubanbook = require('doubanbook')

cloud.init()
// 自定义函数  获取书籍信息
async function getDoubanBookInfo(isbn) {
  // 豆瓣读书获取书籍信息的地址
  let url = 'https://search.douban.com/book/subject_search?search_text=' + isbn
  // 截取信息的正则表达
  let reg = /window\.__DATA__ = &quot;(.*)&quot;/
  let res =await axios.get(url);

  if (reg.test(res.data)) {
    // 得到装有书籍信息的对象并返回
    let bookData = doubanbook(RegExp.$1)[0]
    return bookData
  }
}
// 云函数入口函数
exports.main = async (event, context) =&gt; {
  const wxContext = cloud.getWXContext()
  let { isbn } = event;
  let bookInfo = await getDoubanBookInfo(isbn);
  //s发送给前端
  return {
    title:bookInfo.title,
    url:bookInfo.url,
    cover_url:bookInfo.cover_url
  }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><ol start="3"><li>前端页面中定义按钮，点击调用微信扫码API</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>    &lt;button type=&quot;primary&quot; bindtap=&quot;scanCode&quot;&gt;扫描二维码&lt;/button&gt;

    &lt;text&gt;题目：{{title}}&lt;/text&gt;

    &lt;text&gt;网址：{{url}}&lt;/text&gt;

    &lt;image mode=&quot;widthFix&quot; src=&quot;{{src}}&quot;&gt;&lt;/image&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol start="4"><li>前端js文件中加入data数据以及事件函数，并将结果存入数据库中</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>  //顶部
  //获取数据库引用
  const db = wx.cloud.database()


  //Page中
  data: {
    title: '',
    url: '',
    src: ''
  },
  scanCode() {
    var that = this;
    wx.scanCode({
      onlyFromCamera: true,
      success(res) {
        const isbn = 9787010009186;
        wx.cloud.callFunction({
          name: 'book',//云函数名称
          data: {
            isbn
          },
          success: res =&gt; {
            res = res.result;
            that.setData({
              title: res.title,
              url: res.url,
              src: res.cover_url
            })
            //数据库操作  添加
            db.collection('book').add({
              data:res
            }).then(()=&gt;{
              wx.showModal({
                title: res.title+'添加成功',
              })
            })
          },
          error: err =&gt; {
            console.log(err)
          }
        })
      }
    })
  },
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div><h2 id="移动端布局"><a href="#移动端布局" class="header-anchor">#</a> 移动端布局</h2> <h3 id="vw-vh布局"><a href="#vw-vh布局" class="header-anchor">#</a> vw/vh布局</h3> <p>转换：px/设计稿的宽度*100 = vw<br>
插件：px-to-vw<br>
使用：打开设置 -&gt; 搜索px-to-vw -&gt; 修改设计稿宽度和保留小数点 -&gt; 框选住需要转换的代码，Alt+z即可</p> <h3 id="优化策略"><a href="#优化策略" class="header-anchor">#</a> 优化策略</h3> <ol><li>分包策略。先展示重要的，剩下的按需加载。</li> <li>压缩图片。或者减少图片数量。</li> <li>精简代码，减少不必要的资源。</li> <li>压缩代码。</li> <li>数据缓存，在onLoad的时候请求数据。</li> <li>使用骨架屏，避免白屏。</li> <li>合并this.setData()，避免过多调用</li></ol></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/VuePress/knowledge/vscode.html" class="prev">
        vscode
      </a></span> <span class="next"><a href="/VuePress/knowledge/webpack.html">
        webpack
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/VuePress/assets/js/app.77389705.js" defer></script><script src="/VuePress/assets/js/2.f648027b.js" defer></script><script src="/VuePress/assets/js/31.15690ab4.js" defer></script>
  </body>
</html>
